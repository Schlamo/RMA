<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<title>Damoventure</title>
	<script type="text/javascript" src="js/phaser.js"></script>
	<script type="text/javascript" src="js/boot.js"></script>
	<script type="text/javascript" src="js/load.js"></script>
	<script type="text/javascript" src="js/menu.js"></script>
	<script type="text/javascript" src="js/play.js"></script>
	<script type="text/javascript" src="js/win.js"></script>
	<script type="text/javascript" src="js/game.js"></script>

	<style type="text/css">
		body {
			margin: 0;
		}
	</style>
</head>
<body>
	<script type="text/javascript">
		function init() {
			//Scale to fit Mobile Screen
			game.scale.scaleMode = Phaser.ScaleManager.NO_SCALE;
			game.scale.pageAlignVertically = true;
			game.scale.pageAlignHorizontally = true;
			game.scale.setShowAll();
			game.scale.refresh();
		}

		function create() {
			map = game.add.tilemap('map', 32, 16);

			//  Now add in the tileset
			map.addTilesetImage('tiles');
			layer = map.createLayer(0);
			layer.resizeWorld();
			//  This isn't totally accurate, but it'll do for now
			map.setCollisionBetween(2, 3);

			//  Enable Game Physics
			game.physics.startSystem(Phaser.Physics.ARCADE);
			// The player and its settings
			player = game.add.sprite(32, game.world.height - 250, 'dude');

			game.physics.arcade.enable(player);


			player.body.bounce.y = 0.2;
			player.body.gravity.y = 300;
			player.body.collideWorldBounds = true;

			player.animations.add('left', [0, 1, 2, 3], 10, true);
			player.animations.add('right', [5, 6, 7, 8], 10, true);


			//  Stars
			stars = game.add.group();
			stars.enableBody = true;

			for (var i = 0; i < 12; i++) {
					var star = stars.create(i * 70, 0, 'star');
				star.body.gravity.y = 300;
				star.body.bounce.y = 0.7 + Math.random() * 0.2;
			}

			//Show Controls
			var control_left = game.add.sprite(25, game.world.height-80, 'controls_left_inactive');
			control_left.inputEnabled = true;
			control_left.events.onInputDown.add(moveLeft, this);
			game.input.onTap.add(stop, this);

			var control_right = game.add.sprite(125, game.world.height-80, 'controls_right_inactive');
			control_right.inputEnabled = true;
			control_right.events.onInputDown.add(moveRight, this);

			var control_top = game.add.sprite(game.world.width-100, game.world.height-80, 'controls_top_inactive');
			control_top.inputEnabled = true;
			control_top.events.onInputDown.add(jump, this);

			var control_attack = game.add.sprite(game.world.width-200, game.world.height-80, 'attack');
			control_attack.sinputEnabled = true;

			game.camera.follow(player);

			control_left.fixedToCamera = true;
			control_right.fixedToCamera = true;
			control_top.fixedToCamera = true;
			control_attack.fixedToCamera = true;
		}

		function update() {
		}

		function render() {

		}


	</script>
	<div id="gameDiv">

	</div>
</body>
</html>